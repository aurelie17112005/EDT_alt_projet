{"version":3,"file":"js/882.502ef2fe.js","mappings":"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","sources":["webpack://frontend/./node_modules/core-js/modules/es.iterator.for-each.js","webpack://frontend/./src/views/student/ScanView.vue","webpack://frontend/./src/components/student/QrCodeScanner.vue","webpack://frontend/src/components/student/QrCodeScanner.vue","webpack://frontend/./src/components/student/QrCodeScanner.vue?1479","webpack://frontend/./src/components/student/QrCodeScanner.vue?2a5a","webpack://frontend/src/views/student/ScanView.vue","webpack://frontend/./src/views/student/ScanView.vue?b9f9","webpack://frontend/./src/views/student/ScanView.vue?f41f"],"sourcesContent":["'use strict';\nvar $ = require('../internals/export');\nvar call = require('../internals/function-call');\nvar iterate = require('../internals/iterate');\nvar aCallable = require('../internals/a-callable');\nvar anObject = require('../internals/an-object');\nvar getIteratorDirect = require('../internals/get-iterator-direct');\nvar iteratorClose = require('../internals/iterator-close');\nvar iteratorHelperWithoutClosingOnEarlyError = require('../internals/iterator-helper-without-closing-on-early-error');\n\nvar forEachWithoutClosingOnEarlyError = iteratorHelperWithoutClosingOnEarlyError('forEach', TypeError);\n\n// `Iterator.prototype.forEach` method\n// https://tc39.es/ecma262/#sec-iterator.prototype.foreach\n$({ target: 'Iterator', proto: true, real: true, forced: forEachWithoutClosingOnEarlyError }, {\n  forEach: function forEach(fn) {\n    anObject(this);\n    try {\n      aCallable(fn);\n    } catch (error) {\n      iteratorClose(this, 'throw', error);\n    }\n\n    if (forEachWithoutClosingOnEarlyError) return call(forEachWithoutClosingOnEarlyError, this, fn);\n\n    var record = getIteratorDirect(this);\n    var counter = 0;\n    iterate(record, function (value) {\n      fn(value, counter++);\n    }, { IS_RECORD: true });\n  }\n});\n","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('v-container',[_c('v-card',[_c('v-card-title',[_vm._v(\"Scanner QR Code\")]),_c('v-card-text',[(_vm.isScanning)?_c('qr-code-scanner',{on:{\"scan-success\":_vm.handleScanSuccess,\"scan-error\":_vm.handleScanError}}):_c('v-btn',{attrs:{\"color\":\"primary\"},on:{\"click\":_vm.startScanner}},[_vm._v(\" Démarrer le scan \")])],1)],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"qr-scanner\"},[_c('video',{ref:\"video\",attrs:{\"width\":\"100%\",\"autoplay\":\"\",\"playsinline\":\"\"}}),_c('canvas',{ref:\"canvas\",staticStyle:{\"display\":\"none\"}})])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"qr-scanner\">\r\n    <video ref=\"video\" width=\"100%\" autoplay playsinline></video>\r\n    <canvas ref=\"canvas\" style=\"display: none;\"></canvas>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'QrCodeScanner',\r\n  emits: ['scan-success', 'scan-error'],\r\n  data: () => ({\r\n    scanner: null\r\n  }),\r\n  mounted() {\r\n    this.initScanner()\r\n  },\r\n  beforeUnmount() {\r\n    this.stopScanner()\r\n  },\r\n  methods: {\r\n    async initScanner() {\r\n      try {\r\n        const stream = await navigator.mediaDevices.getUserMedia({ video: { facingMode: 'environment' } })\r\n        this.$refs.video.srcObject = stream\r\n        this.scanner = setInterval(this.scanQrCode, 500)\r\n      } catch (error) {\r\n        this.$emit('scan-error', error)\r\n      }\r\n    },\r\n    scanQrCode() {\r\n      const video = this.$refs.video\r\n      const canvas = this.$refs.canvas\r\n      const context = canvas.getContext('2d')\r\n\r\n      canvas.width = video.videoWidth\r\n      canvas.height = video.videoHeight\r\n      context.drawImage(video, 0, 0, canvas.width, canvas.height)\r\n\r\n      try {\r\n        const qrData = this.decodeQrFromCanvas(canvas)\r\n        if (qrData) {\r\n          this.$emit('scan-success', qrData)\r\n          this.stopScanner()\r\n        }\r\n      } catch (error) {\r\n        this.$emit('scan-error', error)\r\n      }\r\n    },\r\n    stopScanner() {\r\n      if (this.scanner) {\r\n        clearInterval(this.scanner)\r\n        this.scanner = null\r\n      }\r\n      if (this.$refs.video.srcObject) {\r\n        this.$refs.video.srcObject.getTracks().forEach(track => track.stop())\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./QrCodeScanner.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./QrCodeScanner.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./QrCodeScanner.vue?vue&type=template&id=2952094b\"\nimport script from \"./QrCodeScanner.vue?vue&type=script&lang=js\"\nexport * from \"./QrCodeScanner.vue?vue&type=script&lang=js\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\r\n  <v-container>\r\n    <v-card>\r\n      <v-card-title>Scanner QR Code</v-card-title>\r\n      <v-card-text>\r\n        <qr-code-scanner\r\n          v-if=\"isScanning\"\r\n          @scan-success=\"handleScanSuccess\"\r\n          @scan-error=\"handleScanError\"\r\n        />\r\n        <v-btn v-else @click=\"startScanner\" color=\"primary\">\r\n          Démarrer le scan\r\n        </v-btn>\r\n      </v-card-text>\r\n    </v-card>\r\n  </v-container>\r\n</template>\r\n\r\n<script>\r\nimport QrCodeScanner from '@/components/student/QrCodeScanner'\r\n\r\nexport default {\r\n  name: 'ScanView',\r\n  components: { QrCodeScanner },\r\n  data: () => ({\r\n    isScanning: false\r\n  }),\r\n  methods: {\r\n    startScanner() {\r\n      this.isScanning = true\r\n    },\r\n    async handleScanSuccess(qrData) {\r\n      try {\r\n        await this.$api.post('/attendance/scan', {\r\n          token: qrData,\r\n          studentId: this.$store.getters['auth/currentUser'].id\r\n        })\r\n        this.$store.dispatch('showSnackbar', {\r\n          message: 'Présence enregistrée!',\r\n          color: 'success'\r\n        })\r\n      } catch (error) {\r\n        this.handleScanError(error)\r\n      } finally {\r\n        this.isScanning = false\r\n      }\r\n    },\r\n    handleScanError(error) {\r\n      this.$store.dispatch('showSnackbar', {\r\n        message: error.response?.data?.message || 'Erreur de scan',\r\n        color: 'error'\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ScanView.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ScanView.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./ScanView.vue?vue&type=template&id=7690207c\"\nimport script from \"./ScanView.vue?vue&type=script&lang=js\"\nexport * from \"./ScanView.vue?vue&type=script&lang=js\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"names":["$","call","iterate","aCallable","anObject","getIteratorDirect","iteratorClose","iteratorHelperWithoutClosingOnEarlyError","forEachWithoutClosingOnEarlyError","TypeError","target","proto","real","forced","forEach","fn","this","error","record","counter","value","IS_RECORD","_v","render","_vm","_c","_self","staticClass","ref","attrs","staticStyle","staticRenderFns","name","emits","data","scanner","mounted","initScanner","beforeUnmount","stopScanner","methods","stream","navigator","mediaDevices","getUserMedia","video","facingMode","$refs","srcObject","setInterval","scanQrCode","$emit","canvas","context","getContext","width","videoWidth","height","videoHeight","drawImage","qrData","decodeQrFromCanvas","clearInterval","getTracks","track","stop","component","components","QrCodeScanner","isScanning","startScanner","handleScanSuccess","$api","post","token","studentId","$store","getters","id","dispatch","message","color","handleScanError","response"],"sourceRoot":""}